<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Display</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div id="navbarContainer" style="width: 100%; height: 100px; position: -webkit-sticky;position: sticky;"></div>

        <script>
            document.addEventListener("DOMContentLoaded", function() {
                fetch('Navbar.html')
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById('navbarContainer').innerHTML = data;
                    })
                    .catch(error => {
                        console.error('Error fetching Navbar:', error);
                    });
            });
        </script>
    <div class="container d-flex flex-wrap justify-content-center">
        
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const fake = [];
            
            fetchFakeStore();

            function fetchFakeStore() {
                fetch("https://fakestoreapi.com/products/category/jewelery")
                    .then(response => response.json())
                    .then(data => {
                        fake.push(...data);
                        renderProducts(fake);
                    })
                    .catch(error => {
                        console.error('Error fetching products:', error);
                    });
            }

            function truncateText(text, maxLength) {
                if (text.length <= maxLength) return text;
                return text.slice(0, maxLength) + '...';
            }

            function handleReadMore(event) {
                event.preventDefault();
                const cardBody = event.target.parentNode;
                const cardText = cardBody.querySelector('.card-text');
                const fullText = cardText.getAttribute('data-full-text');
                const isExpanded = cardText.classList.toggle('expanded');
                if (isExpanded) {
                    cardText.textContent = fullText;
                    event.target.textContent = 'Read less';
                } else {
                    cardText.textContent = truncateText(fullText, 100);
                    event.target.textContent = 'Read more';
                }
            }

            function passVal(id) {
                console.log(id);
                localStorage.setItem('objectToPass', id);
            }

            function renderProducts(products) {
                const container = document.querySelector(".container");
                container.innerHTML = ''; // Clear previous content
                
                products.forEach(values => {
                    const card = document.createElement("a");
                    card.setAttribute('href', 'ProductPage.html'); // Corrected this line
                    card.className = "card btn";
                    card.style.width = "18rem";
                    card.style.margin = "2rem";
                    card.style.textDecoration = 'none';
                    card.style.position = 'relative';

                    card.addEventListener("click", function(event) {
                        event.preventDefault();
                        passVal(values.id);
                        window.open('ProductPage.html', '_blank');
                    });
                    
                    const img = document.createElement("img");
                    img.src = values.image;
                    img.className = "card-img-top";
                    img.alt = "imagehere";
                    img.style.maxHeight = '200px';
                    img.style.objectFit = 'contain';
                    card.appendChild(img);

                    const hoverImg = document.createElement("img");
                    hoverImg.src = values.hoverImage;
                    hoverImg.className = "hover-img";
                    hoverImg.alt = "hoverImage";
                    hoverImg.style.maxHeight = '200px';
                    hoverImg.style.objectFit = 'contain';
                    hoverImg.style.display = 'none';
                    hoverImg.style.position = 'absolute';
                    hoverImg.style.top = '0';
                    hoverImg.style.left = '0';
                    hoverImg.style.right = '0';
                    hoverImg.style.bottom = '0';
                    card.appendChild(hoverImg);

                    const cardBody = document.createElement("div");
                    cardBody.className = "card-body";
                    card.appendChild(cardBody);

                    const title = document.createElement("h5");
                    title.className = "card-title";
                    title.textContent = values.title.length > 20 ? values.title.slice(0, 20) + '...' : values.title;
                    cardBody.appendChild(title);

                    const description = document.createElement("p");
                    description.className = "card-text";
                    description.setAttribute("data-full-text", values.description);
                    description.textContent = truncateText(values.description, 100);
                    cardBody.appendChild(description);

                    if (values.description.length > 100) {
                        const readMoreBtn = document.createElement("button");
                        readMoreBtn.className = "btn btn-link";
                        readMoreBtn.textContent = "Read more";
                        readMoreBtn.addEventListener("click", handleReadMore);
                        cardBody.appendChild(readMoreBtn);
                    }

                    const addToCartBtn = document.createElement("a");
                    addToCartBtn.href = '';
                    addToCartBtn.className = "btn btn-primary";
                    addToCartBtn.addEventListener("click", LoginFirst);
                    addToCartBtn.innerHTML = '&#8377;' + values.price + ' Add to Cart';
                    cardBody.appendChild(addToCartBtn);

                    container.appendChild(card);
                });
            }

            function LoginFirst() {
                alert("login first");
            }
        });
    </script>
    <footer class="footer bg-dark text-light py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6" style="text-align: left;">
                    <h2>Contact Us</h2>
                    <p>Email: harshitsharma182021@gmail.com</p>
                    <p>Phone: 923456324</p>
                </div>
                <div class="col-md-6 d-flex justify-content-center align-items-center">
                    <a href="https://www.instagram.com/lavanpvt?igsh=MWN4Nmk2bHNocGZ6Mw==" target="_blank" rel="noopener noreferrer" class="text-light me-3">
                        <span class="fa fa-instagram fa-2x"></span>
                    </a>
                    <a href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer" class="text-light">
                        <span class="fa fa-facebook-square fa-2x"></span>
                    </a>
                </div>
            </div>
        </div>
    </footer>
</body>

</html>
